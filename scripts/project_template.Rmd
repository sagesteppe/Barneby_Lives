---
title: "Barneby Lives usage example"
author: "steppe"
date: "`r Sys.Date()`"
output: html_document
---


```{r}
library(tidyverse)
library(sf)
source('functions.R')
```


```{r dummy data}
dummy_pts <- data.frame(
  collectionNo = paste0(rep('RCB', 1000), seq(1:1000)),
  day = c(sample(1:31, size = 1000, replace = T)),
  month = c(sample(5:10, size = 1000, replace = T)),
  year = 2023,
  longitude = runif(1000, min = -120, max = -100), 
  latitude = runif(1000, min = 35, max = 48)
) %>% sf::st_as_sf(coords = c(x = 'longitude', y = 'latitude'), crs = 4326, remove = F)

```

```{r coordinate parsing if required}

 out <- dms2dd(dummy_pts)

 x <- x |>
    dplyr::relocate(any_of(
      c('longitude_dms', 'latitude_dms', 'latitude_dd', 'longitude_dd')), 
    .before = last_col())
```



```{r date parsing}

fourtet <- data.frame(col_date = c('12/23/2003','07/09/2023', '1/13/2016'),
                      det_date = c('12/25/2003','07/09/2023', '1/13/2016'),
                      tet = c('abc', 'def', 'ggg'))

date_parser(fourtet, coll_date = 'col_date', det_date = 'det_date')

```




```{r Acquire administrative geodata}

places <- sf::st_read('../geodata/places/places.shp', quiet = T)

out1 <- political_grabber(dummy_pts, 'collectionNo')
out2 <- place_grabber(dummy_pts)
out3 <- physical_grabber(dummy_pts)

```

