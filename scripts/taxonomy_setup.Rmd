---
title: "Barneby Lives!"
author: "steppe"
date: "9/13/2021"
output: html_document
---

```{r}
library(tidyverse)
library(kewr)
library(WorldFlora)
WFO.remember()
source('functions.R')
```

# the first letter of the genus must be correct, 
# the first three letters of the species must be correct


```{r}


cla <- data.table::fread('../taxonomic_data/WFO_Backbone/classification.txt')
genLKPtab <- unique(cla, by = 'genus')[taxonomicStatus == 'Accepted','genus'] %>% 
  arrange(genus) %>% 
  mutate(Grp = str_extract(genus, '[A-Z][a-z]{1}'))%>% 
  rename(strings = genus)

speLKPtab <- unique(cla, by = 'specificEpithet')[
  taxonomicStatus == 'Accepted','specificEpithet'] %>% 
  arrange(specificEpithet) %>% 
  mutate(Grp = str_extract(specificEpithet, '[a-z]{3}')) %>% 
  rename(strings = specificEpithet)


spell_check('Poa annua') # works
spell_check('Poar annua') # works
spell_check('Poa annur') # works
spell_check('Poar annur') # works
spell_check('Pou annua') # works


```

stages...
verify the spelling of the genus (parse these from the POWO webshot)
verify the spelling of the epithet (parse these from the POWO webshot)



if not verified
fuzzy match genus... (somehow get a local list.....)
fuzzy match epithet...

find authorship...


```{r}
lapply(c('Cryptantha glomerata', 'Sphenosciadium capitellatum'), powo_searcher)
```




   
