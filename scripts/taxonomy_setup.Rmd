---
title: "Barneby Lives!"
author: "steppe"
date: "9/13/2021"
output: html_document
---

```{r}
library(tidyverse)
library(kewr)
library(WorldFlora)
WFO.remember()
source('functions.R')
```


stages...
verify the spelling of the genus (parse these from the POWO webshot)
verify the spelling of the epithet (parse these from the POWO webshot)

if not verified
fuzzy match genus... (somehow get a local list.....)
fuzzy match epithet...

find authorship...


```{r}

dropped_infra <- search_powo("Ivesia lycopodioides var. lycopodioides")
valid_binomial <- search_powo("Ivesia lycopodioides")
kept_infra <- search_powo("Potentilla lycopodioides var. megalopetala")
what_do_w_authority_autonyms <- search_powo("Potentilla lycopodioides var. lycopodioides")

powo_searcher("Potentilla lycopodioides var. megalopetala")
powo_searcher("Potentilla lycopodioides var. lycopodioides")

lapply(c('Poa annua', 'Linnaea borealis'), powo_searcher)



```



```{r}

test <- WorldFlora::WFO.match(
  spec.data = WFO.example, 
   spec.name = 'binomial',
   Fuzzy = 0.1)

family_spellings <- vascular.families %>% 
  dplyr::pull(Family)


pec.test <- data.frame(spec.name=c("Faidherbia albida", "Acacia albida",
"Faidherbia albidum", "Faidherbia albidus",
"Faidherbia albiida",
"Prunus africanus", "Prunos africanea",
"Prunus afrocaneus", "Prunus afrocaneos"))

match1 <- WFO.match.fuzzyjoin(spec.data=spec.test, WFO.data=WFO.example,
fuzzydist.max = 6)
```

   
