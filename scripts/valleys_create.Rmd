---
title: "Creating Named Valleys Dataset"
author: "Payton Lott, Gus Rytting, Reed Benkendorf"
date: "`r Sys.Date()`"
output: html_document
---

The 'Mountains Inventory version 2' dataset generated by Global Mountain Biodiversity Assessment contains a standardized naming schema for all of the worlds mountains. We are interested in developing a simpler named schema for many of the valleys and watersheds of Western North America. 

USGS Watershed Boundary Dataset (WBD) was used to identify major watersheds [The National Map](https://apps.nationalmap.gov/downloader/#/).




```{r}
library(tidyverse)
library(sf)
library(terra)
```


```{r mountains}
mtns <- st_read('../geodata/mountains/mountains.shp', quiet = T)
mtn_bbox <- mtns %>% 
  st_transform(4269) %>% 
  st_bbox()
```

```{r load watershed dataset}

pbasin <- '../geodata_raw/watershedBoundaries/WBD_National_GPKG/WBD_National_GPKG.gpkg'
st_layers(pbasin)

hu2 <- st_read(dsn = pbasin, layer = 'WBDHU2', quiet = T)  %>% 
  select(HU2_NAME = name) %>% 
  st_crop(., mtn_bbox)

hu8 <- st_read(dsn = pbasin, layer = 'WBDHU8', quiet = T)  %>% 
  select(HU8_NAME = name) %>% 
  st_crop(., mtn_bbox)

hu8 <- st_join(hu2, hu8) 
```

```{r}

ggplot() + 
  geom_sf(data = hu8)

gb <- filter(hu2, name == 'Great Basin Region')
```

